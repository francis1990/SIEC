{% extends 'NomencladorBundle:Default:nom_base.html.twig' %}
{% block titulo_cont %}
    <li><a href="{{ path('portada') }}">Inicio</a></li>
    <li><a>Nomencladores</a></li>
    <li><a href="{{ path('producto_index') }}">Productos</a></li>
    <li><a class="">{{ accion }}</a></li>
{% endblock %}

 {% block menu_bot %}
 {% endblock %}
{% block contenido %}
    <section class="content">
        <div class="row">
            <div class="col-xs-12">
                <div class="box box-primary ">
                    <div class="box-header">
                        <h3 class="box-title">{{ accion }}</h3>
                    </div><!-- /.box-header -->
                    <div class="box-body">
                        {{ form_start(form,{'attr':{ 'id':'form-producto','class':'form-edit' }}) }}
                        <div class="form-horizontal bootstrap-validator-form">
                            <fieldset id="componentes" style="margin-top: 10px">
                                <div class="form-group col-xs-6">
                                    <label class="col-xs-4 control-label">{{ form_label(form.codigo) }}</label>

                                    <div class="col-xs-8">
                                        {{ form_widget(form.codigo) }}
                                        {{ form_errors(form.codigo) }}
                                    </div>

                                </div>
                                <div class="form-group col-xs-6">
                                    <label class="col-xs-4 control-label">{{ form_label(form.nombre) }}</label>

                                    <div class="col-xs-8">
                                        {{ form_widget(form.nombre) }}
                                        {{ form_errors(form.nombre) }}
                                    </div>
                                </div>

                                <div class="form-group col-xs-6">
                                    <label class="col-xs-4 control-label">{{ form_label(form.idgenerico) }}</label>

                                    <div class="col-xs-8">
                                        {{ form_widget(form.idgenerico) }}
                                        {{ form_errors(form.idgenerico) }}
                                    </div>
                                </div>
                                <div class="form-group col-xs-6">
                                    <label id="lb_formato" data-ajax-url="{{ path('producto_formato') }}"
                                           class="col-xs-4 control-label">{{ form_label(form.idformato) }}</label>

                                    <div class="col-xs-8">
                                        {{ form_widget(form.idformato) }}
                                        {{ form_errors(form.idformato) }}
                                    </div>
                                </div>


                                <div class="form-group col-xs-6">
                                    <label id="lb_subgenerico" data-ajax-url="{{ path('producto_elementos') }}"
                                           class="col-xs-4 control-label">{{ form_label(form.idsubgenerico) }}</label>
                                    {#<i class="fa fa-spinner fa-spin"></i>#}
                                    <div class="col-xs-8">
                                        {{ form_widget(form.idsubgenerico) }}
                                        {{ form_errors(form.idsubgenerico) }}
                                    </div>
                                </div>
                                <div class="form-group col-xs-6">
                                    <label for="umOperativa"
                                           class="col-xs-4 control-label"> {{ form_label(form.umOperativa) }}</label>
                                    <div class="col-xs-8">
                                        {{ form_widget(form.umOperativa) }}
                                        {{ form_errors(form.umOperativa) }}
                                    </div>
                                </div>
                                <div class="form-group col-xs-6">
                                    <label id="lb_especifico" data-ajax-url="{{ path('producto_especificos') }}"
                                           class="col-xs-4 control-label">{{ form_label(form.idespecifico) }}</label>

                                    <div class="col-xs-8" style=" background: rgba(255, 255, 255, 0.7);">
                                        {{ form_widget(form.idespecifico) }}
                                        {{ form_errors(form.idespecifico) }}
                                    </div>
                                </div>

                                <div class="form-group col-xs-6">
                                    <label for="factor"
                                           class="col-xs-4 control-label"> {{ form_label(form.factor) }}</label>
                                    <div class="col-xs-8">
                                        {{ form_widget(form.factor) }}
                                        {{ form_errors(form.factor) }}
                                    </div>
                                </div>

                                <div class="form-group col-xs-6">
                                    <label id="lb_tipo" data-ajax-url="{{ path('especifico_tipo') }}"
                                           class="col-xs-4 control-label">{{ form_label(form.idtipoespecifico) }}</label>

                                    <div class="col-xs-8">
                                        {{ form_widget(form.idtipoespecifico) }}
                                        {{ form_errors(form.idtipoespecifico) }}
                                    </div>

                                </div>
                                <div class="form-group col-xs-6">
                                    <label for="codOnei"
                                           class="col-xs-4 control-label"> {{ form_label(form.codOnei) }}</label>
                                    <div class="col-xs-8">
                                        {{ form_widget(form.codOnei) }}
                                        {{ form_errors(form.codOnei) }}
                                    </div>
                                </div>


                                <div class="form-group col-xs-6">
                                    <label id="lb_sabor" data-ajax-url="{{ path('producto_sabor') }}"
                                           class="col-xs-4 control-label">{{ form_label(form.idsabor) }}</label>

                                    <div class="col-xs-8">
                                        {{ form_widget(form.idsabor) }}
                                        {{ form_errors(form.idsabor) }}
                                    </div>
                                </div>
                            </fieldset>

                            <hr>
                            <div class="row">
                                <div class="form-group col-xs-12">
                                    <div class="col-xs-5 col-xs-offset-7">
                                        {% if accion == "Adicionar" %}
                                            <button title="Guardar" type="submit" class="btn btn-primary  disabled"
                                                    id="btn_agregar_producto">
                                                <i class="glyphicon glyphicon-save icon-white "></i>
                                                Guardar
                                            </button>
                                        {% endif %}
                                        {{ form_widget(form.aceptar) }}

                                        <a title="Cancelar" href="{{ path('producto_index') }}"
                                           data-url="{{ path('producto_index') }}"
                                           class="btn btn-default  {% if accion != 'Adicionar' %} editcerrar {% endif %}">
                                            <i class="glyphicon glyphicon-remove icon-white"></i>
                                            Cancelar
                                        </a>
                                    </div>
                                </div>
                            </div>

                        </div>
                        {{ form_end(form) }}
                    </div><!-- /.box-body -->

                </div>
            </div>

        </div>
    </section>
    <script type="text/javascript">

        window.g = 0;
        window.s = 0;
        window.e = 0;
        window.t = 0;
        window.sa = 0;
        window.f = 0;
        window.p = '';

        {% if nomPadre.idproducto is  defined %}
        window.p ={{ nomPadre.idproducto }};

        if (window.p !== '') {
            {% if nomPadre.idgenerico is  not null %}
            window.g ={{ nomPadre.idgenerico.idgenerico }};
            {% endif %}
            {% if nomPadre.idsubgenerico is  not null %}
            window.s ={{ nomPadre.idsubgenerico.idsubgenerico }};
            {% endif %}
            {% if nomPadre.idespecifico is  not null %}
            window.e ={{ nomPadre.idespecifico.idespecifico }};
            {% endif %}
            {% if nomPadre.idtipoespecifico is  not null %}
            window.t ={{ nomPadre.idtipoespecifico.idtipoespecifico }};
            {% endif %}
            {% if nomPadre.idsabor is  not null %}
            window.sa ={{ nomPadre.idsabor.idsabor }};
            {% endif %}
            {% if nomPadre.idformato is  not null %}
            window.f ={{ nomPadre.idformato.id }};
            {% endif %}
        }
        {% endif %}


    </script>
{% endblock %}

