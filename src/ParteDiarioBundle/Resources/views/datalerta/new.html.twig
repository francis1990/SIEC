{% extends 'ParteDiarioBundle:Default:partediario_base.html.twig' %}
 {% block asiderigth %}"right-side strech"{% endblock %}

{% block hide_menu %}
{% endblock %}
{% block bread %}

{% endblock %}

{% block menu_bot %}

{% endblock %}
 {% block titulo_cont %}
     <li><a href="{{ path('portada') }}">Inicio</a></li>
     <li><a href="{{ path('parte_alerta_index') }}">Alertas</a></li>
     <li><a href="{{ path('parte_alerta_index') }}">
             {% if tipo == 'Economia' %}
                 Economía
             {% elseif tipo == 'Produccion' %}
                 Niveles de Actividad
             {% else %}
                 {{ tipo }}
             {% endif %}
         </a></li>
     <li><a class="active">{{ accion }}</a></li>
 {% endblock %}


{% block menu_lateral %}

{% endblock %}
{% block contenido %}
    <section class="content">
        <div class="row">
            <div class="col-sm-12">
                <div class="box box-primary ">
                    <div class="box-header">
                        <h3 class="box-title">{{ accion }}</h3>
                    </div>
                    <div class="box-body">
                        {{ form_start(form,{'attr':{'class':'form-edit fmalert'}}) }}
                        <div class="form-horizontal bootstrap-validator-form">
                            <div>
                                <div class="row">
                                    <div class="form-group col-sm-2 hidden">
                                        <label for="codigo"
                                               class=" control-label"> {{ form_label(form.fecha) }}</label>
                                        <div class="">
                                            {{ form_widget(form.fecha) }}
                                            {{ form_errors(form.fecha) }}
                                        </div>

                                    </div>
                                </div>

                                <div class="form-group  col-sm-6">
                                    <label for="codigo"
                                           class="col-xs-4 control-label"> {{ form_label(form.entidad) }}</label>
                                    <div class="col-xs-8">
                                        {{ form_widget(form.entidad) }}
                                        {{ form_errors(form.entidad) }}
                                    </div>
                                </div>


                                {% if name == 'production_alert' %}
                                    <div class="form-group  col-sm-6 ">
                                        <label for="codigo"
                                               class="col-xs-4 control-label"> {{ form_label(form.moneda) }}</label>
                                        <div class="col-xs-8">
                                            {{ form_widget(form.moneda) }}
                                            {{ form_errors(form.moneda) }}
                                        </div>
                                    </div>
                                    <div class="form-group  col-sm-6  ">
                                        <label for="codigo"
                                               class="col-xs-4 control-label"> {{ form_label(form.tipo_plan) }}</label>
                                        <div class="col-xs-8">
                                            {{ form_widget(form.tipo_plan) }}
                                            {{ form_errors(form.tipo_plan) }}
                                        </div>
                                    </div>
                                    <div class="form-group  col-sm-6  ">
                                        <label for="codigo"
                                               class="col-xs-4 control-label"> {{ form_label(form.ejercicio) }}</label>
                                        <div class="col-xs-8">
                                            {{ form_widget(form.ejercicio) }}
                                            {{ form_errors(form.ejercicio) }}
                                        </div>
                                    </div>
                                    <div class="form-group  col-sm-6  ">
                                        <label for="codigo"
                                               class="col-xs-4 control-label"> {{ form_label(form.periodo) }}</label>
                                        <div class="col-xs-8">
                                            {{ form_widget(form.periodo) }}
                                            {{ form_errors(form.periodo) }}
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-6 ">
                                        <label for="codigo"
                                               class="col-xs-4 control-label"> {{ form_label(form.usuarios) }}</label>
                                        <div class="col-xs-8">
                                            {{ form_widget(form.usuarios) }}
                                            {{ form_errors(form.usuarios) }}
                                        </div>
                                    </div>
                                    <div class="form-group col-xs-12">
                                        <label for="codigo" class="col-xs-2 control-label"> Condición:</label>
                                        <div class="well col-xs-9" style="margin-left: 10px; width: 79%;">
                                            <div class="col-xs-12">
                                                <div class="form-group col-xs-7 ">
                                                    <label for="codigo"
                                                           class=" control-label"> {{ form_label(form.producto) }}</label>
                                                    <div class="">
                                                        {{ form_widget(form.producto) }}
                                                        {{ form_errors(form.producto) }}
                                                    </div>

                                                </div>
                                                <div class="form-group col-xs-3 ">
                                                    <label for="codigo"
                                                           class=" control-label"> {{ form_label(form.operador) }}</label>
                                                    <div class="">
                                                        {{ form_widget(form.operador) }}
                                                        {{ form_errors(form.operador) }}
                                                    </div>
                                                </div>
                                                <div class="form-group col-xs-2 ">
                                                    <label for="codigo"
                                                           class=" control-label"> {{ form_label(form.cant) }}</label>
                                                    <div class="">
                                                        {{ form_widget(form.cant) }}
                                                        {{ form_errors(form.cant) }}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                {% endif %}

                                {% if name == 'aseguramiento_alert' %}
                                    <div class="form-group col-sm-6 ">
                                        <label for="codigo"
                                               class="col-xs-4 control-label"> {{ form_label(form.usuarios) }}</label>
                                        <div class="col-xs-8">
                                            {{ form_widget(form.usuarios) }}
                                            {{ form_errors(form.usuarios) }}
                                        </div>
                                    </div>
                                    <div class="form-group col-xs-12">
                                        <label for="codigo" class="col-xs-2 control-label"> Condición:</label>
                                        <div class="well col-xs-9" style="margin-left: 10px; width: 79%;">
                                            <div class="col-xs-12">
                                                <div class="form-group col-xs-7 ">
                                                    <label for="codigo"
                                                           class=" control-label"> {{ form_label(form.insumo) }}</label>
                                                    <div class="">
                                                        {{ form_widget(form.insumo) }}
                                                        {{ form_errors(form.insumo) }}
                                                    </div>

                                                </div>
                                                <div class="form-group col-xs-3 ">
                                                    <label for="codigo"
                                                           class=" control-label"> {{ form_label(form.operador) }}</label>
                                                    <div class="">
                                                        {{ form_widget(form.operador) }}
                                                        {{ form_errors(form.operador) }}
                                                    </div>
                                                </div>
                                                <div class="form-group col-xs-2 ">
                                                    <label for="codigo"
                                                           class=" control-label"> {{ form_label(form.cant) }}</label>
                                                    <div class="">
                                                        {{ form_widget(form.cant) }}
                                                        {{ form_errors(form.cant) }}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                {% endif %}
                                {% if name == 'venta_alert' %}

                                    <div class="form-group col-sm-6">
                                        <label for="codigo"
                                               class="col-xs-4 control-label"> {{ form_label(form.moneda) }}</label>
                                        <div class="col-xs-8">
                                            {{ form_widget(form.moneda) }}
                                            {{ form_errors(form.moneda) }}
                                        </div>

                                    </div>

                                    <div class="form-group col-sm-6 ">
                                        <label for="codigo"
                                               class="col-xs-4 control-label"> {{ form_label(form.tipo_plan) }}</label>
                                        <div class="col-xs-8">
                                            {{ form_widget(form.tipo_plan) }}
                                            {{ form_errors(form.tipo_plan) }}
                                        </div>

                                    </div>
                                    <div class="form-group col-sm-6  ">
                                        <label for="codigo"
                                               class="col-xs-4 control-label"> {{ form_label(form.ejercicio) }}</label>
                                        <div class="col-xs-8">
                                            {{ form_widget(form.ejercicio) }}
                                            {{ form_errors(form.ejercicio) }}
                                        </div>

                                    </div>

                                    <div class="form-group col-sm-6 ">
                                        <label for="codigo"
                                               class="col-xs-4 control-label"> {{ form_label(form.periodo) }}</label>
                                        <div class="col-xs-8">
                                            {{ form_widget(form.periodo) }}
                                            {{ form_errors(form.periodo) }}
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-6  ">
                                        <label for="codigo"
                                               class="col-xs-4 control-label"> {{ form_label(form.grupo_interes) }}</label>
                                        <div class="col-xs-8">
                                            {{ form_widget(form.grupo_interes) }}
                                            {{ form_errors(form.grupo_interes) }}
                                        </div>
                                    </div>

                                    <div class="form-group col-sm-6 ">
                                        <label for="codigo"
                                               class="col-xs-4 control-label"> {{ form_label(form.usuarios) }}</label>
                                        <div class="col-xs-8">
                                            {{ form_widget(form.usuarios) }}
                                            {{ form_errors(form.usuarios) }}
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-6  " id="div-cliente"
                                         data-url="{{ path('parteventa_precio') }}">
                                        <label for="codigo"
                                               class="col-xs-4 control-label"> {{ form_label(form.cliente) }}</label>
                                        <div class="col-xs-8">
                                            {{ form_widget(form.cliente) }}
                                            {{ form_errors(form.cliente) }}
                                        </div>
                                    </div>

                                    <div class="form-group col-xs-12">
                                        <label for="codigo" class="col-xs-2 control-label"> Condición:</label>
                                        <div class="well col-xs-9" style="margin-left: 10px; width: 79%;">
                                            <div class="col-xs-12">
                                                <div class="form-group col-xs-7 ">
                                                    <label for="codigo"
                                                           class=" control-label"> {{ form_label(form.producto) }}</label>
                                                    <div class="">
                                                        {{ form_widget(form.producto) }}
                                                        {{ form_errors(form.producto) }}
                                                    </div>

                                                </div>
                                                <div class="form-group col-xs-3 ">
                                                    <label for="codigo"
                                                           class=" control-label"> {{ form_label(form.operador) }}</label>
                                                    <div class="">
                                                        {{ form_widget(form.operador) }}
                                                        {{ form_errors(form.operador) }}
                                                    </div>
                                                </div>
                                                <div class="form-group col-xs-2 ">
                                                    <label for="codigo"
                                                           class=" control-label"> {{ form_label(form.cant) }}</label>
                                                    <div class="">
                                                        {{ form_widget(form.cant) }}
                                                        {{ form_errors(form.cant) }}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                {% endif %}


                                {% if name == 'dat_alerta_portador' %}

                                    <div class="form-group col-sm-6 ">
                                        <label for="codigo"
                                               class="col-xs-4 control-label"> {{ form_label(form.consumo_inventario) }}</label>
                                        <div class="col-xs-8">
                                            {{ form_widget(form.consumo_inventario) }}
                                            {{ form_errors(form.consumo_inventario) }}
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-6 campos_ocultos">
                                        <label for="codigo"
                                               class="col-xs-4 control-label"> {{ form_label(form.tipo_plan) }}</label>
                                        <div class="col-xs-8">
                                            {{ form_widget(form.tipo_plan) }}
                                            {{ form_errors(form.tipo_plan) }}
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-6 campos_ocultos">
                                        <label for="codigo"
                                               class="col-xs-4 control-label"> {{ form_label(form.ejercicio) }}</label>
                                        <div class="col-xs-8">
                                            {{ form_widget(form.ejercicio) }}
                                            {{ form_errors(form.ejercicio) }}
                                        </div>
                                    </div>
                                        <div class="form-group col-sm-6 campos_ocultos">
                                            <label for="codigo"
                                                   class="col-xs-4 control-label"> {{ form_label(form.periodo) }}</label>
                                            <div class="col-xs-8">
                                                {{ form_widget(form.periodo) }}
                                                {{ form_errors(form.periodo) }}
                                            </div>
                                        </div>



                                    <div class="form-group col-sm-6 ">
                                        <label for="codigo"
                                               class="col-xs-4 control-label"> {{ form_label(form.usuarios) }}</label>
                                        <div class="col-xs-8">
                                            {{ form_widget(form.usuarios) }}
                                            {{ form_errors(form.usuarios) }}
                                        </div>
                                    </div>

                                    <div class="form-group col-xs-12">
                                        <label for="codigo" class="col-xs-2 control-label"> Condición:</label>
                                        <div class="well col-xs-9" style="margin-left: 10px; width: 79%;">
                                            <div class="col-xs-12">
                                                <div class="form-group col-xs-5 ">
                                                    <label for="codigo"
                                                           class=" control-label"> {{ form_label(form.portador) }}</label>
                                                    <div class="">
                                                        {{ form_widget(form.portador) }}
                                                        {{ form_errors(form.portador) }}
                                                    </div>

                                                </div>
                                                <div class="form-group col-xs-2 ">
                                                    <label for="codigo"
                                                           class=" control-label"> {{ form_label(form.operador) }}</label>
                                                    <div class="">
                                                        {{ form_widget(form.operador) }}
                                                        {{ form_errors(form.operador) }}
                                                    </div>
                                                </div>
                                                <div class="form-group col-xs-4 cantidad">
                                                    <label for="codigo"
                                                           class=" control-label"> {{ form_label(form.cant) }}</label>
                                                    <div class="">
                                                        {{ form_widget(form.cant) }}
                                                        {{ form_errors(form.cant) }}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                {% endif %}

                                {% if name == 'dat_alerta_transporte' %}
                                    <div class="form-group col-sm-6 ">
                                        <label for="codigo"
                                               class="col-xs-4 control-label"> {{ form_label(form.usuarios) }}</label>
                                        <div class="col-xs-8">
                                            {{ form_widget(form.usuarios) }}
                                            {{ form_errors(form.usuarios) }}
                                        </div>
                                    </div>
                                    <div class="form-group col-xs-12">
                                        <label for="codigo" class="col-xs-2 control-label"> Condición:</label>
                                        <div class="well col-xs-9" style="margin-left: 10px; width: 79%;">
                                            <div class="col-xs-12">
                                                <div class="form-group col-xs-7 ">
                                                    <label for="codigo"
                                                           class=" control-label"> {{ form_label(form.tipo_transporte) }}</label>
                                                    <div class="">
                                                        {{ form_widget(form.tipo_transporte) }}
                                                        {{ form_errors(form.tipo_transporte) }}
                                                    </div>
                                                </div>
                                                <div class="form-group col-xs-3 ">
                                                    <label for="codigo"
                                                           class=" control-label"> {{ form_label(form.operador) }}</label>
                                                    <div class="">
                                                        {{ form_widget(form.operador) }}
                                                        {{ form_errors(form.operador) }}
                                                    </div>
                                                </div>
                                                <div class="form-group col-xs-2 ">
                                                    <label for="codigo"
                                                           class=" control-label"> {{ form_label(form.cant) }}</label>
                                                    <div class="">
                                                        {{ form_widget(form.cant) }}
                                                        {{ form_errors(form.cant) }}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                {% endif %}

                                {% if name == 'dat_alerta_economia' %}

                                    <div class="form-group  col-sm-6">
                                        <label for="codigo"
                                               class="col-xs-4 control-label"> {{ form_label(form.vencidaCuenta) }}</label>
                                        <div class="col-xs-8">
                                            {{ form_widget(form.vencidaCuenta) }}
                                            {{ form_errors(form.vencidaCuenta) }}
                                        </div>
                                    </div>

                                    <div class="form-group col-sm-6 ">
                                        <label for="codigo"
                                               class="col-xs-4 control-label"> {{ form_label(form.usuarios) }}</label>
                                        <div class="col-xs-8">
                                            {{ form_widget(form.usuarios) }}
                                            {{ form_errors(form.usuarios) }}
                                        </div>
                                    </div>
                                    <div class="form-group col-xs-12">
                                        <label for="codigo" class="col-xs-2 control-label"> Condición:</label>
                                        <div class="well col-xs-9" style="margin-left: 10px; width: 79%;">
                                            <div class="col-xs-12">
                                                <div class="form-group col-xs-7 ">
                                                    <label for="codigo"
                                                           class=" control-label"> {{ form_label(form.cuenta) }}</label>
                                                    <div class="">
                                                        {{ form_widget(form.cuenta) }}
                                                        {{ form_errors(form.cuenta) }}
                                                    </div>
                                                </div>
                                                <div class="form-group col-xs-3 ">
                                                    <label for="codigo"
                                                           class=" control-label"> {{ form_label(form.operador) }}</label>
                                                    <div class="">
                                                        {{ form_widget(form.operador) }}
                                                        {{ form_errors(form.operador) }}
                                                    </div>
                                                </div>
                                                <div class="form-group col-xs-2 ">
                                                    <label for="codigo"
                                                           class=" control-label"> {{ form_label(form.cant) }}</label>
                                                    <div class="">
                                                        {{ form_widget(form.cant) }}
                                                        {{ form_errors(form.cant) }}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}

                                <div class="form-group col-xs-12">
                                    <label for="descripcion"
                                           class="col-xs-2 control-label"> {{ form_label(form.descripcion) }}</label>
                                    <div class="col-xs-10" style="width: 81%">
                                        {{ form_widget(form.descripcion) }}
                                        {{ form_errors(form.descripcion) }}
                                    </div>
                                </div>
                                <fieldset>
                                    <div class="form-group">
                                        <div class="col-sm-6  col-sm-offset-6">
                                            {{ form_widget(form.aceptar) }}
                                            <a title="Cancelar"
                                               href="{{ path('parte_alerta_index') }}"
                                               data-url="{{ path('parte_alerta_index') }}"
                                               class="btn btn-default {% if accion != 'Adicionar' %} editcerrar {% endif %}">
                                                <i class="glyphicon glyphicon-remove icon-white"></i>
                                                Cancelar
                                            </a>

                                        </div>
                                    </div>
                                </fieldset>
                            </div>

                            {{ form_end(form) }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" src="{{ asset('bundles/tercero/js/js_plan/fn_alerta.js') }}"></script>
    <script type="text/javascript">
        var $grupo = $('#venta_alert_grupo_interes');
        $grupo.change(function () {
            var $form = $(this).closest('form');
            var data = {};
            data[$grupo.attr('name')] = $grupo.val();
            if ($grupo.val() != '')
                lock_screen();
            $.ajax({
                url: $form.attr('action'),
                type: $form.attr('method'),
                data: data,
                success: function (html) {
                    unlock_screen();
                    $('#venta_alert_cliente').replaceWith(
                        $(html).find('#venta_alert_cliente')
                    );
                    $('#venta_alert_cliente_chosen').remove()
                    $('#venta_alert_cliente').chosen()

                }
            });
        });
    </script>
{% endblock %}

